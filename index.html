<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Laporan Surat Masuk & Keluar ‚Äî Seksi PD Pontren Gowa</title>
  <meta name="description" content="Aplikasi sederhana laporan surat masuk dan surat keluar Seksi PD Pontren Gowa.">
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0f766e">
  <style>
    /* --- Basic Reset & Theme --- */
    :root{
      --bg:#0b1217;
      --card:#0f1720;
      --muted:#0f766e;
      --muted-2:#0ea5a3;
      --text:#e7f6f2;
      --text-dim:#b5d5cf;
      --danger:#e11d48;
      --warning:#f59e0b;
      --ok:#22c55e;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}
    a{color:var(--muted-2);}
    .container{max-width:1100px;margin:0 auto;padding:16px;}
    .appbar{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:14px}
    .brand{display:flex;gap:12px;align-items:center}
    .brand h1{font-size:18px;margin:0;line-height:1.2}
    .brand small{display:block;color:var(--text-dim)}
    .card{background:var(--card);border:1px solid #12333a;border-radius:16px;padding:14px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    .grid{display:grid;gap:12px}
    @media(min-width:900px){.grid-cols-2{grid-template-columns:1fr 1fr}}
    label{display:block;font-size:12px;color:var(--text-dim);margin-bottom:6px}
    input,select,textarea{width:100%;padding:10px 12px;border-radius:12px;border:1px solid #234f54;background:#0b1a1c;color:var(--text)}
    textarea{min-height:72px;resize:vertical}
    .row{display:grid;grid-template-columns:repeat(12,1fr);gap:10px}
    .col-6{grid-column:span 6}.col-4{grid-column:span 4}.col-3{grid-column:span 3}.col-12{grid-column:span 12}
    @media(max-width:700px){.col-6,.col-4,.col-3{grid-column:span 12}}
    .btn{border:none;border-radius:12px;padding:10px 14px;background:var(--muted);color:#042a29;font-weight:700;cursor:pointer}
    .btn:hover{filter:brightness(1.1)}
    .btn.secondary{background:#10333a;color:var(--text)}
    .btn.ghost{background:transparent;border:1px solid #244b4d;color:var(--text)}
    .btn.warn{background:var(--warning);color:#332100}
    .btn.danger{background:var(--danger);color:#fff}
    .toolbar{display:flex;flex-wrap:wrap;gap:8px;margin:10px 0}
    .table{width:100%;border-collapse:separate;border-spacing:0 8px}
    .table th{font-size:12px;color:var(--text-dim);text-align:left;padding:6px}
    .table td{background:#0b1a1c;padding:10px;border-top:1px solid #234f54;border-bottom:1px solid #234f54}
    .table tr td:first-child{border-left:1px solid #234f54;border-top-left-radius:12px;border-bottom-left-radius:12px}
    .table tr td:last-child{border-right:1px solid #234f54;border-top-right-radius:12px;border-bottom-right-radius:12px}
    .pill{display:inline-block;padding:4px 8px;border-radius:999px;font-size:12px}
    .pill.masuk{background:rgba(59,130,246,.15);color:#93c5fd;border:1px solid rgba(59,130,246,.4)}
    .pill.keluar{background:rgba(16,185,129,.15);color:#86efac;border:1px solid rgba(16,185,129,.4)}
    .muted{color:var(--text-dim);font-size:12px}
    .footer{margin:24px 0;color:var(--text-dim);font-size:12px;text-align:center}
    .chip{font-size:12px;border:1px solid #244b4d;padding:4px 8px;border-radius:999px;display:inline-flex;gap:6px;align-items:center}
    .badge{font-size:12px;border:1px solid #244b4d;padding:2px 6px;border-radius:6px}
    .hidden{display:none !important}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <div class="container">
    <div class="appbar">
      <div class="brand">
        <svg width="36" height="36" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M12 3l7 4v10l-7 4-7-4V7l7-4z" stroke="#17c6be" stroke-width="1.5" />
          <circle cx="12" cy="12" r="2" fill="#17c6be"/>
        </svg>
        <div>
          <h1>LAPORAN SURAT MASUK & KELUAR</h1>
          <small>Seksi PD Pontren Gowa ‚Äî PWA</small>
        </div>
      </div>
      <div class="toolbar">
        <button class="btn secondary" id="btnInstall" title="Instal ke layar utama">Instal</button>
        <button class="btn ghost" id="btnBackup" title="Unduh cadangan (JSON)">Backup</button>
        <label class="chip" for="fileRestore">
          <input id="fileRestore" class="sr-only" type="file" accept="application/json">
          Pulihkan
        </label>
      </div>
    </div>

    <div class="grid grid-cols-2">
      <div class="card">
        <h2 style="margin-top:0">Entri Baru</h2>
        <form id="formSurat" class="grid" autocomplete="off">
          <div class="row">
            <div class="col-6">
              <label for="jenis">Jenis Surat</label>
              <select id="jenis" required>
                <option value="masuk">Masuk</option>
                <option value="keluar">Keluar</option>
              </select>
            </div>
            <div class="col-6">
              <label for="nomor">Nomor Surat</label>
              <input id="nomor" placeholder="contoh: 123/PD-Pontren/VIII/2025" required>
            </div>
            <div class="col-6">
              <label for="tanggalSurat">Tanggal Surat</label>
              <input id="tanggalSurat" type="date" required>
            </div>
            <div class="col-6">
              <label for="tanggalTerimaKirim">Tanggal Diterima/Dikirim</label>
              <input id="tanggalTerimaKirim" type="date" required>
            </div>
            <div class="col-6">
              <label for="asalTujuan">Asal/Tujuan</label>
              <input id="asalTujuan" placeholder="Asal (masuk) / Tujuan (keluar)" required>
            </div>
            <div class="col-6">
              <label for="sifat">Sifat</label>
              <select id="sifat">
                <option value="Biasa">Biasa</option>
                <option value="Penting">Penting</option>
                <option value="Segera">Segera</option>
                <option value="Rahasia">Rahasia</option>
              </select>
            </div>
            <div class="col-12">
              <label for="perihal">Perihal</label>
              <input id="perihal" placeholder="Perihal surat" required>
            </div>
            <div class="col-6">
              <label for="lampiran">Lampiran</label>
              <input id="lampiran" placeholder="mis: 1 berkas">
            </div>
            <div class="col-6">
              <label for="disposisi">Disposisi</label>
              <input id="disposisi" placeholder="mis: Kasi/Staff terkait">
            </div>
            <div class="col-12">
              <label for="catatan">Catatan</label>
              <textarea id="catatan" placeholder="Tambahan (opsional)"></textarea>
            </div>
          </div>
          <div class="toolbar">
            <button class="btn" id="btnSimpan">Simpan</button>
            <button class="btn ghost" type="reset">Reset</button>
          </div>
          <input type="hidden" id="editingId">
        </form>
      </div>

      <div class="card">
        <h2 style="margin-top:0">Filter & Rekap</h2>
        <div class="row">
          <div class="col-4">
            <label for="filterJenis">Jenis</label>
            <select id="filterJenis">
              <option value="semua">Semua</option>
              <option value="masuk">Masuk</option>
              <option value="keluar">Keluar</option>
            </select>
          </div>
          <div class="col-4">
            <label for="filterDari">Dari Tanggal</label>
            <input id="filterDari" type="date">
          </div>
          <div class="col-4">
            <label for="filterSampai">Sampai Tanggal</label>
            <input id="filterSampai" type="date">
          </div>
          <div class="col-12">
            <label for="filterCari">Pencarian</label>
            <input id="filterCari" placeholder="Cari nomor/perihal/asal-tujuan">
          </div>
        </div>
        <div class="toolbar">
          <button class="btn secondary" id="btnExportCSV">Unduh CSV</button>
          <button class="btn secondary" id="btnExportJSON">Unduh JSON</button>
          <button class="btn ghost" id="btnPrint">Cetak</button>
          <span id="rekapInfo" class="badge"></span>
        </div>
      </div>
    </div>

    <div class="card" style="margin-top:12px">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:10px">
        <h2 style="margin:0">Data Surat</h2>
        <span class="muted" id="countInfo">0 entri</span>
      </div>
      <div class="toolbar">
        <span class="chip">Tips: klik baris untuk mengedit ‚Ä¢ ikon üóëÔ∏è untuk hapus</span>
      </div>
      <div style="overflow:auto">
        <table class="table" id="tbl">
          <thead>
            <tr>
              <th>Jenis</th>
              <th>Nomor</th>
              <th>Tgl Surat</th>
              <th>Tgl Terima/Kirim</th>
              <th>Asal/Tujuan</th>
              <th>Perihal</th>
              <th>Sifat</th>
              <th>Lampiran</th>
              <th>Disposisi</th>
              <th>Catatan</th>
              <th>Aksi</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>

    <div class="footer">
      ¬© 2025 Seksi PD Pontren Gowa ‚Ä¢ Aplikasi web sederhana ‚Äî dapat dipasang (PWA), bekerja offline, dan data tersimpan di perangkat (LocalStorage). Untuk akses banyak perangkat, unggah hasil Backup ke server bersama atau gunakan layanan hosting.
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
